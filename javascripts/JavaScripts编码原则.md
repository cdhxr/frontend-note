#js 
### 写好JS的一些原则

- CSS：让HTML、CSS和JavaScript职能分离。
- 组件封装：好的UI组件具备正确性、扩展性、复用性。
- 过程抽象：应用函数式编程思想。


### *HTML/CSS/JS 各司其责*

- 应当避免不必要的由 JS 直接操作样式
- 可以用 class 来表示状态
- 纯展示类交互寻求零 JS 方案（不必强求）

### *组件封装*

基本方法

- 结构设计
- 展现效果
- 行为设计
	- API(功能)
	- event（控制流）

重构：插件化

- 将控制元素抽取成插件
- 插件与组件之间通过依赖注入方式建立联系

重构：模版化

- 将HTML和CSS模版化
- 使之易于扩展

重构：抽象化



组件封装总结：

- 组件设计的原则：封装性、正确性、扩展性、复用性
- 实现组件的步骤：结构设计、展现效果、行为设计
- 三次重构
  - 插件化
  - 模板化
  - 抽象化（组件框架）

[[组建封装 Example]]

### *过程抽象*

####  **高阶函数 (Higher-Order Function, HOF)**
 高阶函数的特点
1. **以函数作为参数**  
   - 高阶函数可以接受一个或多个函数作为其输入参数。
   - 这种特性使得高阶函数能够对传入的函数进行包装或扩展，从而增强功能。

2. **以函数作为返回值**  
   - 高阶函数可以返回一个新的函数，这个函数通常包含了特定的逻辑或被增强的功能。
   - 这使得函数式编程具有更强的组合性。

3. **常用于作为函数装饰器**  
   - 装饰器是一种设计模式，可以动态地为一个函数添加新的功能而不改变其原有逻辑。
   - 高阶函数在实现装饰器时非常常用。

---

 图中实现示例
代码实现了一个高阶函数 `HOF`，其作用是对传入的函数进行封装：

```javascript
function HOF(fn) {
    return function (...args) {
        return fn.apply(this, args);
    };
}
```

#### 代码分析
1. **`HOF(fn)`**  
   - 接收一个函数 `fn` 作为参数。

2. **返回一个新函数**  
   - 新函数通过 `...args` 接收所有的调用参数。

3. **调用原函数**  
   - 使用 `fn.apply(this, args)` 执行传入的原函数，并将 `this` 和参数列表传递给它。
   - `apply` 方法可以动态绑定 `this`，并将参数数组传递给函数。

- 这是一个基础的函数包装器，可以在 `fn` 执行前后添加额外逻辑。


---

#### 图解部分

![[HOF.png]]

图表展示了高阶函数的核心逻辑：
- 高阶函数可以将一个函数或普通输入作为输入。
- 它可以输出一个结果值（普通值）或新的函数。


为什么使用高阶函数：高阶函数是纯函数，通过调用非纯函数，可以避免使用更多非纯函数，这样利于写测试，只需要对更少非纯函数写测试

#### *声明式编程*

示例：

```javascript
function toggle(...actions) {
  return function (...args) {
    let action = actions.shift();
    actions.push(action);
    return action.apply(this, args);
  };
}
```

#### **代码讲解**
#### 1. **`toggle` 函数**
`toggle` 是一个高阶函数，接受多个函数作为参数，并返回一个新的函数。这个返回的函数可以在多次调用时轮流执行传入的函数。

##### 参数
- `...actions`：通过 **rest 参数**（`...`）收集任意数量的函数，存储在 `actions` 数组中。

#### 2. **返回的函数**
`toggle` 返回的函数能够处理调用时的输入参数。

##### 实现逻辑：
1. **取出第一个函数**：  
   - 使用 `actions.shift()` 移除并返回数组中的第一个函数。  
     此操作会修改 `actions` 数组的结构。

2. **将取出的函数放回数组末尾**：  
   - 使用 `actions.push(action)` 将刚刚移除的函数添加到数组末尾，从而形成循环队列。

3. **调用函数**：  
   - 使用 `action.apply(this, args)` 调用取出的函数，并将调用时的参数 `args` 传递给它。
   - `apply` 方法确保函数能够在正确的上下文（`this`）中执行。

#### 3. **执行效果**
每次调用返回的函数时，`actions` 数组都会被动态调整，轮流执行其中的函数。

---

#### **总结**
- `toggle` 通过闭包和数组操作实现了函数的**轮换调用机制**。
- 代码具有良好的扩展性，可以接收任意数量的函数作为参数。

优点就类似于函数的代码复用