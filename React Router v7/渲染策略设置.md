
React Router 中有三种渲染策略：

- Client Side Rendering  客户端渲染
- Server Side Rendering  服务器端渲染
- Static Pre-rendering  静态预渲染

关键在于对react-router.config.ts的设置

通过ssr属性的true or false可以对设置全局的渲染策为CSR或者SSR

```ts
import type { Config } from "@react-router/dev/config";

export default {
  ssr: false,
} satisfies Config;

```


静态预渲染设置：

```ts
import type { Config } from "@react-router/dev/config";

export default {
  // return a list of URLs to prerender at build time
  async prerender() {
    return ["/", "/about", "/contact"];
  },
} satisfies Config;

```

预渲染是一种构建时操作，
它为一系列 URL 生成静态 HTML 和客户端导航数据有效载荷。

这对于 SEO 和性能非常有用，特别是对于没有服务器渲染的部署。
在预渲染时，会使用路由模块加载器在构建时获取数据。

# Prerender

**预渲染（Pre-rendering）** 是在构建时生成页面，**CSR（客户端渲染）** 是在浏览器中动态构建页面。

所以prerender仅仅适合数据几乎不会更新的页面

仅仅在构建时会在服务端执行所有Loader，Action本质还是和CSR行为一样

| 对比项        | Pre-rendering    | CSR                 |
| ---------- | ---------------- | ------------------- |
| 执行时机       | 构建阶段（打包时）        | 用户访问页面时             |
| 渲染位置       | 服务器/构建机器         | 浏览器中                |
| 是否先看到 HTML | ✅ 是（加载即显示）       | ❌ 否（要等 JS 加载 + 执行完） |
| 页面内容是否动态   | ❌ 固定（需要重新 build） | ✅ 可变（随请求变化）         |

| 场景         | Pre-rendering    | CSR                      |
| ---------- | ---------------- | ------------------------ |
| 首次加载速度     | 🚀 快（直接拿到 HTML）  | 🐢 慢（需要加载 JS 和 fetch 数据） |
| SEO        | ✅ 友好（HTML 可读）    | ❌ 差（需要 JS 执行才能有内容）       |
| 支持静态缓存/CDN | ✅ 可以             | ❌ 不行                     |
| 页面内容是否动态   | ❌ 固定（需要重新 build） | ✅ 可变（随请求变化）              |

# CSR

CSR模式下，Loader和Action都会在浏览器执行，那么其作用类似于react query

是否使用关键需要考虑未来有没有可能迁移SSR

| 项目规模                | 建议                                                   |
| ------------------- | ---------------------------------------------------- |
| 小项目、纯 CSR、不考虑 SSR   | ✅ 使用 React Query 更轻量灵活                               |
| 中大型项目、未来考虑 SSR 或预渲染 | 🔁 用 `loader/action` 替代页面级 fetch；React Query 用于组件内异步 |
| 已用 React Query，不想全改 | ✅ 保留 React Query，只在特殊场景使用 loader/action              |

# SSR

`loader` 和 `action` 都在服务端运行

[[SSR in React Router v7]]

# 混合渲染方案

